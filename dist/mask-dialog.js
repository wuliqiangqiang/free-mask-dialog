"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function _createClass(t,i,s){return i&&_defineProperties(t.prototype,i),s&&_defineProperties(t,s),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("../css/mask-dialog-css.css");var $=require("jquery"),$maskArr={},maskArr={},globalIndex=0,api=function(){function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(var i in _classCallCheck(this,s),this.constructor._default.call(this),t)this[i]=t[i];this.init()}return _createClass(s,[{key:"init",value:function(){globalIndex++;var t=this.version=+new Date;t=this.version+=globalIndex.toString();var i='<div class="mask_dialog'.concat(t,'" style="display: none;"></div>'),s=this.MaskDialogEle=$(i),e='<div class="mask_dialog_main '.concat(this.style,'" data-version="').concat(t,'"></div>');this.MaskDialogContent=$(e),this.MaskDialogButton=$('<div class="mask_dialog_btn_contain"></div>');this.render(),$("body").append(this.MaskDialogEle),this.constructor._otherBind.call(this),this["MaskDialog"+t]=s,$maskArr[t]=this["MaskDialog"+t],maskArr[t]=this}},{key:"render",value:function(){this.constructor._setContentClass.call(this),this.constructor._setCloseButton.call(this),this.constructor._bgCanClose.call(this),this.constructor._setTitle.call(this,this.title),this.constructor._setContent.call(this,this.content),this.constructor._setBg.call(this,this.bg),this.constructor._setScroll.call(this),this.constructor._setButton.call(this),this.MaskDialogEle.html(""),this.MaskDialogEle.append(this.MaskBackground),this.MaskDialogEle.append(this.MaskDialogContent)}},{key:"show",value:function(){return this.showBindEven&&this.showBindEven(),this.autoInitContent&&this.render(),this.MaskDialogEle.show(),this}},{key:"showBefore",value:function(t){return this.showBindEven=t,this}},{key:"hideAfter",value:function(t){return this.hideBindEven=t,this}},{key:"hide",value:function(t){return this["MaskDialog"+(t||this.version)].hide(),this.hideBindEven&&this.hideBindEven(),this}}],[{key:"_default",value:function(){this.bg=!0,this.width="auto",this.height="auto",this.title=!1,this.content=!1,this["z-index"]=100,this.canClose=!1,this.scroll=!0,this.style="default",this.btn=[],this.autoInitContent=!0,this.closeBtn=!0,this.closeBtnEle=".mask_dialog_close"}},{key:"_bgCanClose",value:function(){$(document).on("click",".J-mask-dialog-bg",function(t){var i=$(this).data("version");if(maskArr[i].canClose)return maskArr[i].hide(),t.stopImmediatePropagation(),!1})}},{key:"_setCloseButton",value:function(){this.MaskDialogContent.find(".mask_dialog_close").remove(),this.closeBtn&&this.MaskDialogContent.append('<div class="mask_dialog_close"></div>')}},{key:"_setTitle",value:function(){this.MaskDialogContent.find(".mask_dialog_title").remove(),this.title&&this.title.length&&this.MaskDialogContent.append('<div class="mask_dialog_title">'.concat(this.title,"</div>"))}},{key:"_setContent",value:function(){this.MaskDialogContent.find(".mask_dialog_content").remove(),this.content&&this.content.length&&this.MaskDialogContent.append('<div class="mask_dialog_content">'.concat(this.content,"</div>"))}},{key:"_setBg",value:function(){var t=this.MaskDialogContent.css("z-index")-1;this.MaskDialogEle.find(".mask_dialog_bg").remove(),this.bg?this.MaskBackground='<div class="mask_dialog_bg J-mask-dialog-bg" style="z-index: '.concat(t,'" data-version="').concat(this.version,'"></div>'):this.MaskBackground=""}},{key:"_setButton",value:function(){if(Array.isArray(this.btn)&&0<this.btn.length){var i="";this.btn.map(function(t){i+='<a class="mask_dialog_btn_item" href="'.concat(t.url?t.url:"javascript:;",'" target="').concat(t.target?t.target:"_self",'" data-cb="').concat(t.cb?"1":"0",'">').concat(t.content,"</a>")}),this.MaskDialogButton.html(i),this.MaskDialogContent.find(".mask_dialog_btn_contain").remove(),this.MaskDialogContent.append(this.MaskDialogButton)}}},{key:"_setContentClass",value:function(){var t={"z-index":this["z-index"]?this["z-index"]:100,width:this.width,height:this.height},i="";for(var s in t){if((Number.isFinite(t[s])||-1<t[s].indexOf("%"))&&"z-index"!==s){var e=this.constructor._getUnit.call(this,t[s]),n=this.constructor._getNum.call(this,t[s]);t[s]=n+e}t[s]&&(i+=s+":"+t[s]+";")}return this.MaskDialogContent.attr("style",i)}},{key:"_setScroll",value:function(){this.scroll?$("html").css("overflow","hidden"):$("html").css("overflow","auto")}},{key:"_getUnit",value:function(t){return-1<(t+"").indexOf("%")?"%":"px"}},{key:"_getNum",value:function(t){return Number.parseFloat(t)}},{key:"_otherBind",value:function(){function i(t){$(document).on("click",t,function(t){var i=$(this).parents(".mask_dialog_main").data("version");maskArr[i].hide(),t.stopImmediatePropagation()})}Array.isArray(this.closeBtnEle)?(this.closeBtnEle.push(".mask_dialog_close"),this.closeBtnEle.map(function(t){i(t)})):"string"==typeof this.closeBtnEle&&(".mask_dialog_close"!==this.closeBtnEle?(this.closeBtnEle=[this.closeBtnEle,".mask_dialog_close"],this.closeBtnEle.map(function(t){i(t)})):i(this.closeBtnEle)),$(document).on("click",".mask_dialog_btn_contain .mask_dialog_btn_item",function(){var t=$(this).parents(".mask_dialog_main").data("version"),i=$(this).index();if(+$(this).data("cb")){var s=maskArr[t].btn[i].cb;return s&&s(),!1}})}}]),s}(),_default2=api;exports.default=_default2;